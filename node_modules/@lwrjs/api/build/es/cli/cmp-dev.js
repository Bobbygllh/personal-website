import { logger } from '@lwrjs/diagnostics';
import { launch, moduleSpecifierToKebabCase } from '@lwrjs/shared-utils';
export async function cmpDev(options) {
    const { name, open } = options;
    try {
        const { createPreviewServer } = await import('../localdev/preview-server.js');
        const server = createPreviewServer(options);
        await server.listen(async ({ port }) => {
            const url = `http://localhost:${port}`;
            logger.info(`Component preview available at: ${url}`);
            if (open !== false) {
                await launch(port, false, name ? `/${moduleSpecifierToKebabCase(name)}` : '');
            }
        });
        return server;
    }
    catch (error) {
        logger.error(error);
        process.exit(1);
    }
}
//# sourceMappingURL=cmp-dev.js.map