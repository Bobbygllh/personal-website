import type { HandlerContext, RouteHandlerViewResponse, ViewRequest } from '@lwrjs/types';
import { kebabCaseToModuleSpecifier } from '@lwrjs/shared-utils';

export default function performanceRouteHandler(
    viewRequest: ViewRequest,
    { route }: HandlerContext,
): RouteHandlerViewResponse {
    const specifier = viewRequest.params?.specifier;

    return {
        view: {
            ...route,
            rootComponent: kebabCaseToModuleSpecifier(specifier),
        },
        viewParams: {
            previewComponent: specifier ?? '',
        },
    };
}
