import { registerHandleStaleModuleHook } from './handleStaleModuleESM';
// eslint-disable-next-line @typescript-eslint/ban-ts-comment
// @ts-ignore
import { getClientBootstrapConfig } from 'lwr/preInit';
// eslint-disable-next-line @typescript-eslint/ban-ts-comment
// @ts-ignore
import { registerServerDataCallbacks } from 'lwr/serverDataCallback';
const noop = () => {
  console.warn('API is not supported in ESM format');
};
function getAppMetadata() {
  const {
    appId,
    bootstrapModule,
    rootComponent,
    rootComponents
  } = getClientBootstrapConfig();
  return {
    appId,
    bootstrapModule,
    rootComponent,
    rootComponents
  };
}
export const services = {
  // addLoaderPlugin is only supported in AMD
  addLoaderPlugin: noop,
  handleStaleModule: registerHandleStaleModuleHook,
  appMetadata: getAppMetadata(),
  addServerDataCallback: registerServerDataCallbacks
};